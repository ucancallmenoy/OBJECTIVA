<body>
  <div class="quiz-container">
    <!-- Score Section -->
    <div class="score-header" *ngIf="showScore">
      <h2>Your Score</h2>
      <p class="score">{{ score }} / {{ quizData.length }} questions correctly answered</p>
      <p class="feedback">{{ higher }}</p>
      <p class="feedback" *ngIf="showFeedback">{{ feedback }}</p>
      <button (click)="resetQuiz()">Restart Quiz</button>
      <button (click)="backtoQuiz()">Back to Dashboard</button>
    </div>
    
    <!-- Quiz Section -->
    <div class="quiz-header" *ngIf="!showScore">
      <!-- Question Progress -->
      <div class="question-progress">
        Question {{ currentQuiz + 1 }} of {{ quizData.length }}
      </div>
      
      <!-- Question Display -->
      <h2>{{ quizData[currentQuiz]?.question }}</h2>

      <!-- Code Display (if any) -->
      <pre *ngIf="quizData[currentQuiz]?.code">{{ quizData[currentQuiz].code }}</pre>
      
      <!-- Answer Options -->
      <div class="answers-grid">
        <div 
          class="answer-container" 
          *ngFor="let option of answerOptions"
          [ngClass]="{
            'correct': showExplanation && option.id === quizData[currentQuiz]?.correct,
            'incorrect': showExplanation && selectedAnswer === option.id && option.id !== quizData[currentQuiz]?.correct
          }"
        >
          <input
            type="radio"
            name="answer"
            [id]="option.id"
            [(ngModel)]="selectedAnswer"
            [value]="option.id"
            [disabled]="hasSubmitted"
          />
          <label [for]="option.id">{{ option.text }}</label>
        </div>
      </div>

      <!-- Explanation Section -->
      <div class="explanation" *ngIf="showExplanation">
        <p [ngClass]="{'correct-text': isAnswerCorrect, 'incorrect-text': !isAnswerCorrect}">
          {{ isAnswerCorrect ? 'Correct!' : 'Incorrect!' }}
        </p>
        <p>{{ quizData[currentQuiz]?.explanation }}</p>
      </div>

      <!-- Buttons -->
      <div class="button-container">
        <button 
          *ngIf="!hasSubmitted" 
          [disabled]="!selectedAnswer" 
          (click)="onSubmit()" 
          class="submit-btn">
          Submit
        </button>
        <button 
          *ngIf="hasSubmitted" 
          (click)="nextQuestion()" 
          class="next-btn">
          {{ currentQuiz === quizData.length - 1 ? 'Finish Quiz' : 'Next Question' }}
        </button>
      </div>
    </div>
  </div>
</body>
